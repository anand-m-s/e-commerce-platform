<%-include("../partials/admin-header") %>
<!-- Button trigger modal -->
<div class="modal-addproduct">
    <button type="button" class="btn add-products" data-bs-toggle="modal" data-bs-target="#exampleModal">
      Add product
      </button>  
</div>
  <!-- Modal -->
  <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header" style="text-align: center; background-color: black; color: aliceblue;">
          <h1 class="modal-title fs-5 " id="exampleModalLabel">Add Product</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
            <form action="/admin/addproduct" method="POST" enctype="multipart/form-data"> 
        
                <div class="form-group  text-center">
                    <label for="productname">Product Name</label>
                    <input type="text" class="form-control" id="productname" name="Name" placeholder="Enter Product Name" required>
                    <div class="invalid-feedback">Product Name Can't Be Empty</div>
                </div>

                <div class="form-group text-center">
                    <label for="category">Category</label>
                   
                    <select class="form-control" id="category" name="Category" required>
                     <option value="" disabled selected> Select Category</option>
                     <% categories.forEach(category => { %>
                      <option value="<%= category._id %>"><%= category.categoryName %></option>
                    <% }); %>
                    </select>
                    <div class="invalid-feedback">Please select a category</div>
                </div>

                <div class="form-group text-center">
                    <label for="brand">Brand</label>
                    <input type="text" class="form-control" id="brand" name="Brand" placeholder="Enter Brand" required>
                    <div class="invalid-feedback">Brand Name Can't Be Empty</div>
                </div>

                <div class="form-group text-center">
                    <label for="description">Description</label>
                    <textarea class="form-control" id="description" name="Description" rows="4" placeholder="Enter Description" required></textarea>
                    <div class="invalid-feedback">Description Can't Be Empty</div>
                </div>

                <div class="form-group text-center">
                    <label for="productprice">Product Price:</label>
                    <input type="number" class="form-control" id="productprice" name="Price" placeholder="Enter Product Price" required>
                    <div class="invalid-feedback">Product Price Can't Be Empty</div>
                </div>

             
                <div class="form-group text-center">
                    <p>Product Image:</p>
                    <div class="custom-file">
                        <input type="file" class="custom-file-input" id="productimage" name="ProductImage" required>
                        <label class="custom-file-label" for="productimage"></label>
                        <div class="invalid-feedback">File Format Not Supported</div>
                    </div>
                </div>

                <div class="form-group " id="product-image"></div>
                <div class="text-center">

                    <button class="btn btn-success btn-block mt-3" type="submit">Add Product</button>
                </div>
            </form>
        </div>
      
      </div>
    </div>
  </div>

<!-- display products -->
<div class="container mt-4">
    <h3>Product List</h3>
    <table class="table table-hover">
      <thead>
        <tr>

            <th scope="col">Product Name</th>
            <th scope="col">Brand</th>
            <th scope="col">Price</th>
            <th scope="col">images</th>
          <th scope="col">Actions</th>
        </tr>
      </thead>
      <tbody>
        <% products.forEach(product => { %>
          <tr>
              <td><%= product.Name %></td>
              <td><%= product.Brand %></td>
              <td>$<%= product.Price %></td>
              <td>
                  <img style="width: 50px;"  src="/images/uploads/<%= product.ProductImage.filename %>" class="product-image" alt="<%= product.Name %>" />
              </td>
            <td>
              <a href="/admin/editproduct/<%= product._id %>" class="btn btn-primary btn-sm">Edit</a>
              <a href="/admin/deleteproduct/<%= product._id %>" class="btn btn-danger btn-sm">Delete</a>
            </td>
          </tr>
        <% }); %>
      </tbody>
    </table>
</div>


  <%-include("../partials/end") %>